{#<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">#}
{#<html xmlns="http://www.w3.org/1999/xhtml">#}
{#<head>#}
{#<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />#}
{#<title>Untitled Document</title>#}
{#</head>#}
{#{% extends 'HoD/index.html' %}#}
{##}
{#{% block body %}#}
{#<body>#}
{#<form id="form1" name="form1" method="post" action="">#}
{#  <table width="200" border="1">#}
{#    <tr>#}
{#      <td><div align="center">Staff</div></td>#}
{#      <td><input type="text" name="textfield" /></td>#}
{#    </tr>#}
{#    <tr>#}
{#      <td><div align="center">Exam Hall </div></td>#}
{#      <td><select name="select">#}
{#      </select>#}
{#      </td>#}
{#    </tr>#}
{#    <tr>#}
{#      <td><div align="center">Exam Details </div></td>#}
{#      <td><input type="text" name="textfield2" /></td>#}
{#    </tr>#}
{#    <tr>#}
{#      <td colspan="2"><div align="center">#}
{#        <input type="submit" name="Submit2" value="Add" />#}
{#      </div></td>#}
{#    </tr>#}
{#  </table>#}
{#</form>#}
{#</body>#}
{#</html>#}
{#{% endblock %}#}
{% extends 'HoD/index.html' %}

{% block body %}
<body>
  <div class="container mt-5">
    <h2 class="text-center">Exam Duty List</h2>
    <form id="form1" name="form1" method="post" action="">
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead>
            <tr>
              <th class="text-center">Sl. No.</th>
              <th class="text-center">Staff</th>
              <th class="text-center">Exam Hall</th>
              <th class="text-center">Subject</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for i in val %}
            <tr>
              <td class="text-center">{{ forloop.counter }}</td>
              <td class="text-center">{{ i.STAFF.name }}</td>
              <td class="text-center">{{ i.HALL.hallnumber }}</td>
              <td class="text-center">{{ i.EXAMDETAILS.SUBJECT.subname }}</td>
              <td class="text-center">
                <a href="#" class="btn btn-warning btn-sm" data-toggle="modal" data-target="#editModal{{ forloop.counter }}">Edit</a>
                <a href="#" class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteModal{{ forloop.counter }}">Delete</a>
              </td>
            </tr>

            <!-- Edit Modal -->
            <div class="modal fade" id="editModal{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit Exam Duty</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <!-- Add form for editing here -->
                    <form action="/edit_examduty/{{ i.id }}" method="post">
                      {% csrf_token %}
                      <div class="form-group">
                        <label for="staff">Staff</label>
                        <input type="text" class="form-control" id="staff" name="staff" value="{{ i.STAFF.name }}">
                      </div>
                      <div class="form-group">
                        <label for="exam_hall">Exam Hall</label>
                        <input type="text" class="form-control" id="exam_hall" name="exam_hall" value="{{ i.HALL.hallnumber }}">
                      </div>
                      <div class="form-group">
                        <label for="subject">Subject</label>
                        <input type="text" class="form-control" id="subject" name="subject" value="{{ i.EXAMDETAILS.SUBJECT.subname }}">
                      </div>
                      <button type="submit" class="btn btn-primary">Save Changes</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>

            <!-- Delete Modal -->
            <div class="modal fade" id="deleteModal{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    Are you sure you want to delete this exam duty?
                  </div>
                  <div class="modal-footer">
                    <form action="/delete_examduty/{{ i.id }}" method="post">
                      {% csrf_token %}
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                      <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </form>

    <div class="text-center mt-3">
      <a href="/add_examduty" class="btn btn-primary">Add New</a>
    </div>
  </div>
</body>
{% endblock %}
